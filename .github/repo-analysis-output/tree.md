# af-auth

├── .github
  ├── af-config
    ├── license-header.config.json
    ├── LICENSE_HEADER
    └── repo-analyzer.config.json
  ├── repo-analysis-output
    ├── dependencies.json
    ├── dependencies.md
    ├── file-summaries.json
    ├── file-summaries.md
    ├── SUMMARY.md
    ├── tree.json
    └── tree.md
  └── workflows
    └── af_maintenance.yml
├── docs
  ├── deployment
    └── cloud-run.md
  ├── api.md
  ├── database.md
  ├── github-app-setup.md
  ├── jwt.md
  ├── logging.md
  ├── operations.md
  ├── ROADMAP.md
  ├── security.md
  ├── service-registry.md
  ├── setup.md
  └── ui.md
├── infra
  └── terraform
    ├── aws
      └── README.md
    ├── azure
      └── README.md
    ├── gcp
      ├── backend.tf.example
      ├── main.tf
      ├── outputs.tf
      ├── README.md
      ├── SECURITY.md
      ├── terraform.tfvars.example
      └── variables.tf
    ├── modules
      ├── auth-service
        ├── main.tf
        ├── outputs.tf
        └── variables.tf
      ├── database
        ├── main.tf
        ├── outputs.tf
        └── variables.tf
      ├── network
        ├── main.tf
        ├── outputs.tf
        └── variables.tf
      ├── redis
        ├── main.tf
        ├── outputs.tf
        └── variables.tf
      └── README.md
    ├── README.md
    └── validate.sh
├── prisma
  ├── migrations
    ├── 20241211000000_initial_setup
      └── migration.sql
    ├── 20251212003115_add_service_registry
      └── migration.sql
    ├── 20251212003212_
      └── migration.sql
    ├── 20251212091408_add_revoked_tokens
      └── migration.sql
    ├── 20251212210718_add_key_rotation_tracking
      └── migration.sql
    ├── 20251213000000_encrypt_github_tokens
      └── migration.sql
    ├── migration_lock.toml
    └── README.md
  └── schema.prisma
├── scripts
  ├── check-key-rotation.ts
  ├── cleanup-revoked-tokens.ts
  ├── create-migration.sh
  ├── manage-services.ts
  ├── migrate-encrypt-tokens.ts
  └── validate-db.sh
├── src
  ├── config
    ├── keys
      ├── jwt-public.pem
      └── README.md
    ├── index.test.ts
    └── index.ts
  ├── db
    ├── index.test.ts
    └── index.ts
  ├── middleware
    ├── csp-nonce.test.ts
    ├── csp-nonce.ts
    ├── jwt-auth.test.ts
    ├── jwt-auth.ts
    ├── metrics.test.ts
    ├── metrics.ts
    ├── rate-limit.test.ts
    ├── rate-limit.ts
    ├── security-headers.edge-cases.test.ts
    ├── security-headers.integration.test.ts
    ├── security-headers.test.ts
    ├── security-headers.ts
    ├── validation.test.ts
    └── validation.ts
  ├── pages
    ├── error.tsx
    ├── login.tsx
    ├── token-ready.tsx
    └── unauthorized.tsx
  ├── routes
    ├── auth.test.ts
    ├── auth.ts
    ├── github-token.test.ts
    ├── github-token.ts
    ├── jwt.test.ts
    ├── jwt.ts
    ├── metrics.test.ts
    └── metrics.ts
  ├── services
    ├── __mocks__
      ├── github-oauth.ts
      └── redis-client.ts
    ├── github-oauth.test.ts
    ├── github-oauth.ts
    ├── health-check.test.ts
    ├── health-check.ts
    ├── jwt.test.ts
    ├── jwt.ts
    ├── key-rotation.test.ts
    ├── key-rotation.ts
    ├── metrics.test.ts
    ├── metrics.ts
    ├── redis-client.ts
    ├── service-registry.test.ts
    ├── service-registry.ts
    ├── token-revocation.test.ts
    └── token-revocation.ts
  ├── utils
    ├── encryption.test.ts
    ├── encryption.ts
    ├── logger.test.ts
    └── logger.ts
  ├── server.test.ts
  └── server.ts
├── .env.example
├── .env.test
├── .gitignore
├── CHANGELOG.md
├── docker-compose.yml
├── eslint.config.js
├── jest.config.js
├── jest.setup.js
├── LICENSE
├── package-lock.json
├── package.json
├── README.md
├── SECURITY_SUMMARY.md
└── tsconfig.json